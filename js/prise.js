const pizzaMenu1 = [
  {
    id: "#OP0201",
    name: "포개더",
    type: "골드",
    smallPrice: 32000,
    largePrice: 39500,
    image: "	https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2023314151710070.jpg",
  },
  {
    id: "#OP0202",
    name: "포개더",
    type: "크림치즈",
    smallPrice: 32000,
    largePrice: 49500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/20233141521172.jpg",
  },
  {
    id: "#OP0203",
    name: "포개더",
    type: "오리진",
    smallPrice: 31000,
    largePrice: 38500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2023314142859082.jpg",
  },
  {
    id: "#OP0204",
    name: "포개더",
    type: "치즈캡",
    smallPrice: 35500,
    largePrice: 43000,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2023314153028392.jpg",
  },
  {
    id: "#OP0205",
    name: "포개더",
    type: "에그타르트",
    smallPrice: 32000,
    largePrice: 39500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2023314152452464.jpg",
  },
];
const pizzaMenu2 = [
  {
    id: "#OP0206",
    name: "킹 브레드 쉬림프 골드",
    type: "골드",
    smallPrice: 35000,
    largePrice: 41500,
    image: "	https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2022112192334891.jpg",
  },
  {
    id: "#OP0207",
    name: "킹 브레드 쉬림프 골드",
    type: "크림치즈",
    smallPrice: 35000,
    largePrice: 41500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2022112192334891.jpg",
  },
  {
    id: "#OP0208",
    name: "킹 브레드 쉬림프 골드",
    type: "오리진",
    smallPrice: 33000,
    largePrice: 39500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2022112192627721.jpg",
  },
  {
    id: "#OP0209",
    name: "킹 브레드 쉬림프 골드",
    type: "치즈캡",
    smallPrice: 37500,
    largePrice: 44000,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/202211219241426.jpg",
  },
  {
    id: "#OP0210",
    name: "킹 브레드 쉬림프 골드",
    type: "에그타르트",
    smallPrice: 35000,
    largePrice: 41500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/202211219256086.jpg",
  },
];
const pizzaMenu3 = [
  {
    id: "#OP0211",
    name: "킹 브레드 쉬림프 골드 칠리",
    type: "골드",
    smallPrice: 35000,
    largePrice: 41500,
    image: "	https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2022112192334891.jpg",
  },
  {
    id: "#OP0212",
    name: "킹 브레드 쉬림프 골드 칠리",
    type: "크림치즈",
    smallPrice: 35000,
    largePrice: 41500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2022112192334891.jpg",
  },
  {
    id: "#OP0213",
    name: "킹 브레드 쉬림프 골드 칠리",
    type: "오리진",
    smallPrice: 33000,
    largePrice: 39500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2022112192627721.jpg",
  },
  {
    id: "#OP0214",
    name: "킹 브레드 쉬림프 골드 칠리",
    type: "치즈캡",
    smallPrice: 37500,
    largePrice: 44000,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/202211219241426.jpg",
  },
  {
    id: "#OP0215",
    name: "킹 브레드 쉬림프 골드 칠리",
    type: "에그타르트",
    smallPrice: 35000,
    largePrice: 41500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/202211219256086.jpg",
  },
];
const pizzaMenu4 = [
  {
    id: "#OP0216",
    name: "햄벅한새우",
    type: "골드",
    smallPrice: 33500,
    largePrice: 41500,
    image: "	https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/20201112153636027.jpg",
  },
  {
    id: "#OP0217",
    name: "햄벅한새우",
    type: "크림치즈",
    smallPrice: 33500,
    largePrice: 41500,
    image: "	https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2020111618627452.jpg",
  },
  {
    id: "#OP0218",
    name: "햄벅한새우",
    type: "오리진",
    smallPrice: 31500,
    largePrice: 39500,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/20201112153536343.jpg",
  },
  {
    id: "#OP0219",
    name: "햄벅한새우",
    type: "치즈캡",
    smallPrice: 36000,
    largePrice: 44000,
    image: "https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/2020112791451396.jpg",
  },
  {
    id: "#OP0220",
    name: "햄벅한새우",
    type: "에그타르트",
    smallPrice: 33500,
    largePrice: 41500,
    image: "	https://cdn.mrpizza.co.kr/2011/uploadV1/product_new/20201112153718255.jpg",
  },
];

const pizzaMenus = [pizzaMenu1, pizzaMenu2, pizzaMenu3, pizzaMenu4];

//선택한 피자
const elementM = document.querySelectorAll(".M");
const elementL = document.querySelectorAll(".L");
const elementmenutitle = document.querySelectorAll(".menutitle");
const menuImg = document.querySelectorAll(".pizzaselect");
let select;

for (let i = 0; i < pizzaMenus.length; i++) {
  const pizzaMenu = pizzaMenus[i];
  for (let x = 0; x < pizzaMenu.length; x++) {
    select = document.querySelector(pizzaMenu[x].id).addEventListener("click", (e) => {
      e.preventDefault();
      menuImg[i].src = pizzaMenu[x].image;
      elementM[i].innerText = pizzaMenu[x].smallPrice;
      elementL[i].innerText = pizzaMenu[x].largePrice;
      pizzaType = pizzaMenu[x].type;
      pizzaName = pizzaMenu[x].name;
      elementmenutitle[i].innerText = pizzaMenu[x].type;
    });
  }
}



const elementcart_num = document.getElementsByClassName("cart_num")[0]; //왼쪽빨간 장바구니
const deliveryMenuoption = document.querySelector("#deliveryMenuoption"); // 왼쪽 장바구니 내용
const elementbasketAll = document.querySelectorAll(".basket"); // 모든 장바구니
const menuOption = document.createElement("li"); //장바구니 창조
elementcart_num.innerText = 0; // 장바구니 숫자

for (i = 0; i < pizzaMenus.length; i++){
  elementbasketAll[i].addEventListener("click", (e) => {
    e.preventDefault();
    if (elementcart_num.innerText < 5) {
      elementcart_num.innerText++;
    } else {
      alert("수량은 5개까지 입니다. 문의주세요");
      return elementcart_num.innerText == 5;
    }
  });

}

const menuOptionAll = deliveryMenuoption.getElementsByClassName("menuOption");

function sumInputValues() {
  // 장바구니 토탈 수
  const spinner = document.querySelectorAll(".spinner");
  let total = 0;

  for (let i = 0; i < spinner.length; i++) {
    const value = Number(spinner[i].value);
    total += value;
  }
  return total;
}

//NOTE 장바구니 모양 클릭
let totalprise = 0;
function getSelectedRadioLabel() {
  const total = sumInputValues();
  console.log(menuOptionAll, "dfdd");
  if (menuOptionAll.length < 5 || total < 5) {
    const Menu = document.getElementsByName("Menu"); // 라디오 버튼
    let pizzaSize;
    let pizzaPrise;
    const deliveryTextprise = document.getElementsByClassName("deliveryTextprise")[0];

    for (let i = 0; i < Menu.length; i++) {
      if (Menu[i].checked) {
        i === 0 ? (pizzaSize = "M") : (pizzaSize = "L");
        pizzaPrise = Menu[i].nextElementSibling.innerText;
        console.log(pizzaPrise,"hh")
        totalprise += Number(pizzaPrise);
      }
      deliveryTextprise.innerHTML = totalprise;
      console.log(totalprise,"bb");
    }

    menuOption.innerHTML = `
  <li class="menuOption">
  <p>${pizzaName}-${pizzaType} </p>
  <span>${pizzaSize}</span>
  <div class="sum">
  <input class="spinner" type="text" value='1'>
  <button class="plusPrise" onclick="pluse(this)">+</button>
  <button class="downPrise" onclick="down(this)">-</button>
  </div>
  <span class="optionPrise">${pizzaPrise}</span>
  <button onclick="removeList(this)">닫기</button>
  </li>
  `;
    deliveryMenuoption.insertAdjacentHTML("afterbegin", menuOption.innerHTML);
  }
}
// }

function pluse(button) {
  //플러스 버튼 클릭 시 1플러스
  const total = sumInputValues();
  const spinner = button.parentNode.querySelector(".spinner");
  if (total < 5) {
    spinner.value = Number(spinner.value) + 1;
  } else {
    alert("수량은 5개까지 입니다. 문의주세요");
  }
}
function down(button) {
  //마이너스 버튼 클릭 시 1마이너스
  const total = sumInputValues();
  const spinner = button.parentNode.querySelector(".spinner");
  if (total <= 5) {
    spinner.value = Number(spinner.value) - 1;
    spinner.value = spinner.value >= 0 ? spinner.value : 0;
  }
  if ((spinner.value = 0)) {
    removeList(); //NOTE - 수정피료
  }
}

function removeList(button) {
  const menuOption = button.closest(".menuOption");
  menuOption.parentNode.removeChild(menuOption);
}
